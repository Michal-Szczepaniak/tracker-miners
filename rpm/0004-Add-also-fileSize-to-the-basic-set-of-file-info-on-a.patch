From a2f3a944b9986d4a92f1333049027e7eb99d15dc Mon Sep 17 00:00:00 2001
From: Pekka Vuorela <pekka.vuorela@jolla.com>
Date: Wed, 19 May 2021 13:26:07 +0300
Subject: [PATCH 4/7] Add also fileSize to the basic set of file info on all
 the graph

No need to depend on FileSystem graph to have the sizes.

Related: https://gitlab.gnome.org/GNOME/tracker/-/issues/221
---
 src/miners/fs/tracker-miner-files.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/miners/fs/tracker-miner-files.c b/src/miners/fs/tracker-miner-files.c
index edb43c9d8..35ac13381 100644
--- a/src/miners/fs/tracker-miner-files.c
+++ b/src/miners/fs/tracker-miner-files.c
@@ -2179,6 +2179,9 @@ miner_files_process_file (TrackerMinerFS      *fs,
 		                             g_file_info_get_display_name (file_info));
 
 		tracker_resource_set_datetime (graph_file, "nfo:fileLastModified", modified);
+
+		tracker_resource_set_int64 (graph_file, "nfo:fileSize",
+		                            g_file_info_get_size (file_info));
 	}
 
 	if (delete_properties_sparql)
-- 
2.31.1

